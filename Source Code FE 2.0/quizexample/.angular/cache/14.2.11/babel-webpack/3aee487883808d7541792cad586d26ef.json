{"ast":null,"code":"/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module watchdog/utils/getsubnodes\n */\n\n/* globals EventTarget, Event */\nexport default function getSubNodes(head, excludedProperties = new Set()) {\n  const nodes = [head]; // @if CK_DEBUG_WATCHDOG // const prevNodeMap = new Map();\n  // Nodes are stored to prevent infinite looping.\n\n  const subNodes = new Set();\n  let nodeIndex = 0;\n\n  while (nodes.length > nodeIndex) {\n    // Incrementing the iterator is much faster than changing size of the array with Array.prototype.shift().\n    const node = nodes[nodeIndex++];\n\n    if (subNodes.has(node) || !shouldNodeBeIncluded(node) || excludedProperties.has(node)) {\n      continue;\n    }\n\n    subNodes.add(node); // Handle arrays, maps, sets, custom collections that implements `[ Symbol.iterator ]()`, etc.\n\n    if (Symbol.iterator in node) {\n      // The custom editor iterators might cause some problems if the editor is crashed.\n      try {\n        for (const n of node) {\n          nodes.push(n); // @if CK_DEBUG_WATCHDOG // if ( !prevNodeMap.has( n ) ) {\n          // @if CK_DEBUG_WATCHDOG // \tprevNodeMap.set( n, node );\n          // @if CK_DEBUG_WATCHDOG // }\n        }\n      } catch (err) {// Do not log errors for broken structures\n        // since we are in the error handling process already.\n        // eslint-disable-line no-empty\n      }\n    } else {\n      for (const key in node) {\n        // We share a reference via the protobuf library within the editors,\n        // hence the shared value should be skipped. Although, it's not a perfect\n        // solution since new places like that might occur in the future.\n        if (key === 'defaultValue') {\n          continue;\n        }\n\n        nodes.push(node[key]); // @if CK_DEBUG_WATCHDOG // if ( !prevNodeMap.has( node[ key ] ) ) {\n        // @if CK_DEBUG_WATCHDOG // \tprevNodeMap.set( node[ key ], node );\n        // @if CK_DEBUG_WATCHDOG // }\n      }\n    }\n  } // @if CK_DEBUG_WATCHDOG // return { subNodes, prevNodeMap } as any;\n\n\n  return subNodes;\n}\n\nfunction shouldNodeBeIncluded(node) {\n  const type = Object.prototype.toString.call(node);\n  const typeOfNode = typeof node;\n  return !(typeOfNode === 'number' || typeOfNode === 'boolean' || typeOfNode === 'string' || typeOfNode === 'symbol' || typeOfNode === 'function' || type === '[object Date]' || type === '[object RegExp]' || type === '[object Module]' || node === undefined || node === null || // This flag is meant to exclude singletons shared across editor instances. So when an error is thrown in one editor,\n  // the other editors connected through the reference to the same singleton are not restarted. This is a temporary workaround\n  // until a better solution is found.\n  // More in https://github.com/ckeditor/ckeditor5/issues/12292.\n  node._watchdogExcluded || // Skip native DOM objects, e.g. Window, nodes, events, etc.\n  node instanceof EventTarget || node instanceof Event);\n}","map":{"version":3,"names":["getSubNodes","head","excludedProperties","Set","nodes","subNodes","nodeIndex","length","node","has","shouldNodeBeIncluded","add","Symbol","iterator","n","push","err","key","type","Object","prototype","toString","call","typeOfNode","undefined","_watchdogExcluded","EventTarget","Event"],"sources":["D:/FE-Workspace/quizexample/node_modules/@ckeditor/ckeditor5-watchdog/src/utils/getsubnodes.js"],"sourcesContent":["/**\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module watchdog/utils/getsubnodes\n */\n/* globals EventTarget, Event */\nexport default function getSubNodes(head, excludedProperties = new Set()) {\n    const nodes = [head];\n    // @if CK_DEBUG_WATCHDOG // const prevNodeMap = new Map();\n    // Nodes are stored to prevent infinite looping.\n    const subNodes = new Set();\n    let nodeIndex = 0;\n    while (nodes.length > nodeIndex) {\n        // Incrementing the iterator is much faster than changing size of the array with Array.prototype.shift().\n        const node = nodes[nodeIndex++];\n        if (subNodes.has(node) || !shouldNodeBeIncluded(node) || excludedProperties.has(node)) {\n            continue;\n        }\n        subNodes.add(node);\n        // Handle arrays, maps, sets, custom collections that implements `[ Symbol.iterator ]()`, etc.\n        if (Symbol.iterator in node) {\n            // The custom editor iterators might cause some problems if the editor is crashed.\n            try {\n                for (const n of node) {\n                    nodes.push(n);\n                    // @if CK_DEBUG_WATCHDOG // if ( !prevNodeMap.has( n ) ) {\n                    // @if CK_DEBUG_WATCHDOG // \tprevNodeMap.set( n, node );\n                    // @if CK_DEBUG_WATCHDOG // }\n                }\n            }\n            catch (err) {\n                // Do not log errors for broken structures\n                // since we are in the error handling process already.\n                // eslint-disable-line no-empty\n            }\n        }\n        else {\n            for (const key in node) {\n                // We share a reference via the protobuf library within the editors,\n                // hence the shared value should be skipped. Although, it's not a perfect\n                // solution since new places like that might occur in the future.\n                if (key === 'defaultValue') {\n                    continue;\n                }\n                nodes.push(node[key]);\n                // @if CK_DEBUG_WATCHDOG // if ( !prevNodeMap.has( node[ key ] ) ) {\n                // @if CK_DEBUG_WATCHDOG // \tprevNodeMap.set( node[ key ], node );\n                // @if CK_DEBUG_WATCHDOG // }\n            }\n        }\n    }\n    // @if CK_DEBUG_WATCHDOG // return { subNodes, prevNodeMap } as any;\n    return subNodes;\n}\nfunction shouldNodeBeIncluded(node) {\n    const type = Object.prototype.toString.call(node);\n    const typeOfNode = typeof node;\n    return !(typeOfNode === 'number' ||\n        typeOfNode === 'boolean' ||\n        typeOfNode === 'string' ||\n        typeOfNode === 'symbol' ||\n        typeOfNode === 'function' ||\n        type === '[object Date]' ||\n        type === '[object RegExp]' ||\n        type === '[object Module]' ||\n        node === undefined ||\n        node === null ||\n        // This flag is meant to exclude singletons shared across editor instances. So when an error is thrown in one editor,\n        // the other editors connected through the reference to the same singleton are not restarted. This is a temporary workaround\n        // until a better solution is found.\n        // More in https://github.com/ckeditor/ckeditor5/issues/12292.\n        node._watchdogExcluded ||\n        // Skip native DOM objects, e.g. Window, nodes, events, etc.\n        node instanceof EventTarget ||\n        node instanceof Event);\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA,eAAe,SAASA,WAAT,CAAqBC,IAArB,EAA2BC,kBAAkB,GAAG,IAAIC,GAAJ,EAAhD,EAA2D;EACtE,MAAMC,KAAK,GAAG,CAACH,IAAD,CAAd,CADsE,CAEtE;EACA;;EACA,MAAMI,QAAQ,GAAG,IAAIF,GAAJ,EAAjB;EACA,IAAIG,SAAS,GAAG,CAAhB;;EACA,OAAOF,KAAK,CAACG,MAAN,GAAeD,SAAtB,EAAiC;IAC7B;IACA,MAAME,IAAI,GAAGJ,KAAK,CAACE,SAAS,EAAV,CAAlB;;IACA,IAAID,QAAQ,CAACI,GAAT,CAAaD,IAAb,KAAsB,CAACE,oBAAoB,CAACF,IAAD,CAA3C,IAAqDN,kBAAkB,CAACO,GAAnB,CAAuBD,IAAvB,CAAzD,EAAuF;MACnF;IACH;;IACDH,QAAQ,CAACM,GAAT,CAAaH,IAAb,EAN6B,CAO7B;;IACA,IAAII,MAAM,CAACC,QAAP,IAAmBL,IAAvB,EAA6B;MACzB;MACA,IAAI;QACA,KAAK,MAAMM,CAAX,IAAgBN,IAAhB,EAAsB;UAClBJ,KAAK,CAACW,IAAN,CAAWD,CAAX,EADkB,CAElB;UACA;UACA;QACH;MACJ,CAPD,CAQA,OAAOE,GAAP,EAAY,CACR;QACA;QACA;MACH;IACJ,CAfD,MAgBK;MACD,KAAK,MAAMC,GAAX,IAAkBT,IAAlB,EAAwB;QACpB;QACA;QACA;QACA,IAAIS,GAAG,KAAK,cAAZ,EAA4B;UACxB;QACH;;QACDb,KAAK,CAACW,IAAN,CAAWP,IAAI,CAACS,GAAD,CAAf,EAPoB,CAQpB;QACA;QACA;MACH;IACJ;EACJ,CA5CqE,CA6CtE;;;EACA,OAAOZ,QAAP;AACH;;AACD,SAASK,oBAAT,CAA8BF,IAA9B,EAAoC;EAChC,MAAMU,IAAI,GAAGC,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+Bd,IAA/B,CAAb;EACA,MAAMe,UAAU,GAAG,OAAOf,IAA1B;EACA,OAAO,EAAEe,UAAU,KAAK,QAAf,IACLA,UAAU,KAAK,SADV,IAELA,UAAU,KAAK,QAFV,IAGLA,UAAU,KAAK,QAHV,IAILA,UAAU,KAAK,UAJV,IAKLL,IAAI,KAAK,eALJ,IAMLA,IAAI,KAAK,iBANJ,IAOLA,IAAI,KAAK,iBAPJ,IAQLV,IAAI,KAAKgB,SARJ,IASLhB,IAAI,KAAK,IATJ,IAUL;EACA;EACA;EACA;EACAA,IAAI,CAACiB,iBAdA,IAeL;EACAjB,IAAI,YAAYkB,WAhBX,IAiBLlB,IAAI,YAAYmB,KAjBb,CAAP;AAkBH"},"metadata":{},"sourceType":"module"}